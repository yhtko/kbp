:root{
  --kp-font: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
  --kp-radius: 12px;
  --kp-gap: 12px;
  --kp-muted: #6b7280;
  --kp-border: #e5e7eb;
  --kp-bg: #fff;
  --kp-btn: #0d6efd;
  --kp-danger: #dc3545;
  --kp-ok: #16a34a;
}
html{ font-family:var(--kp-font); }
html[data-kp-theme="dark"]{ filter: invert(1) hue-rotate(180deg); }
@media print{ html[data-kp-theme="dark"]{ filter:none; } }

.kp-wrap{ max-width: 720px; margin: 24px auto; padding: 0 12px; }
.kp-card{ background:var(--kp-bg); border:1px solid var(--kp-border); border-radius:var(--kp-radius); padding:16px; }
.kp-title{ font-size:18px; margin:0 0 6px; }
.kp-desc{ color:var(--kp-muted); margin:0 0 16px; }

.kp-row{ display:grid; grid-template-columns: 200px 1fr; gap:12px; align-items:center; padding:8px 0; }
.kp-label{ color:#374151; font-weight:600; }
.kp-help{ color:var(--kp-muted); font-size:12px; margin-top:6px; }
.kp-field > select,
.kp-field > input{ width:100%; padding:8px; border:1px solid var(--kp-border); border-radius:10px; background:#fff; }

.kp-actions{ display:flex; gap:8px; margin-top:16px; }
.kp-btn{ border:1px solid var(--kp-border); border-radius:10px; padding:8px 14px; background:#fafafa; cursor:pointer; }
.kp-btn.primary{ background:var(--kp-btn); color:#fff; border-color:var(--kp-btn); }
.kp-btn.ghost{ background:transparent; }
.kp-btn.danger{ background:var(--kp-danger); border-color:var(--kp-danger); color:#fff; }

.kp-note{ color:var(--kp-muted); font-size:12px; margin-top:8px; }
.kp-toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:24px; padding:10px 14px; background:#111; color:#fff; border-radius:10px; opacity:.92; z-index:9999; }
.kp-toast.ok{ background:var(--kp-ok); }
.kp-toast.err{ background:var(--kp-danger); }

.kp-table{ width:100%; border-collapse: collapse; margin:8px 0; }
.kp-table th, .kp-table td{ border-bottom:1px solid var(--kp-border); padding:8px; }
.kp-table th{ text-align:left; color:#374151; }
.kp-right{ text-align:right; }

/* =========================
   Common UI Unification v1
   - Modal
   - Icon Button
   - Shared tokens already exist in the same file
   ========================= */

/* --- Icon trigger (header / anywhere) --- */
.kp-icon-btn{
  display:inline-flex; align-items:center; justify-content:center;
  width:28px; height:28px; padding:0; border:1px solid var(--kp-border);
  border-radius:8px; background:#fff; cursor:pointer; line-height:1;
  box-sizing:border-box;
}
.kp-icon-btn:hover{ background:#fafafa; }
.kp-icon-btn:focus-visible{ outline:2px solid var(--kp-btn); outline-offset:2px; }
.kp-icon-btn svg, .kp-icon-btn img{ width:18px; height:18px; pointer-events:none; }

/* --- Modal (backdrop + card) --- */
.kp-modal{
  position:fixed; inset:0; display:none; align-items:center; justify-content:center;
  background:rgba(17,24,39,.42); z-index:9999; /* above kintone header */
}
.kp-modal[aria-hidden="false"]{ display:flex; }

.kp-modal .kp-card{
  width:min(720px, 92vw);
  max-height:80vh; overflow:auto;
  box-shadow:0 10px 24px rgba(0,0,0,.18);
}

/* Consistent header/body/footer layout inside card */
.kp-modal-header{
  font-weight:700; font-size:16px; margin:0 0 8px;
  display:flex; align-items:center; justify-content:space-between;
}
.kp-modal-body{ margin:8px 0 12px; }
.kp-modal-footer{ display:flex; gap:8px; justify-content:flex-end; }

/* Buttons reuse .kp-btn */
.kp-modal .kp-btn{ min-width:92px; }

/* Reduce motion if user prefers */
@media (prefers-reduced-motion:no-preference){
  .kp-modal[aria-hidden="false"] .kp-card{ animation:kp-zoom-in .16s ease-out; }
}
@keyframes kp-zoom-in{ from{ transform:scale(.98); opacity:.0 } to{ transform:scale(1); opacity:1 } }
